<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MMM ‚Ä¢ Tableau de bord V10.3</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="stylesheet" href="/mmm.css">
  <meta name="theme-color" content="#0b0b0b">
</head>

<body>
  <div class="header">Money Motor Muslim ‚Äî Tableau de bord (V10.3)</div>

  <div class="grid">

    <!-- √âtat de l'IA -->
    <div class="card">
      <div><b>√âtat IA :</b> <span id="ia-badge">V√©rification‚Ä¶</span></div>
      <div id="last-check" class="small" style="margin-top:4px;color:#888;">Dernier check : ...</div>
      <div class="small">Serveur API c√¥t√© Vercel ‚Ä¢ PWA installable ‚Ä¢ 100 % licite</div>
      <div style="margin-top:10px">
        <a class="btn" href="/market_live.html">üìà March√© en direct</a>
        <a class="btn" href="/publish_wizard.html">üß© Assistant de publication</a>
        <a class="btn" href="/auto_publisher.html">ü§ñ Smart Auto-Publisher</a>
      </div>
    </div>

    <!-- Conseil instantan√© -->
    <div class="card">
      <div style="margin-bottom:8px;"><b>Conseil instantan√©</b></div>
      <input id="topic" placeholder="Ex: ench√®res voitures Maroc"
        style="width:100%;padding:10px;border-radius:10px;border:1px solid #333;background:#0f0f0f;color:#f2f2f2">
      <button class="btn" id="btn-ask" style="margin-top:10px;">Obtenir un conseil</button>
      <pre id="advice" class="small"></pre>
    </div>

  </div>

  <!-- Script reli√© √† l'API -->
  <script>
  async function checkIA() {
    const badge = document.getElementById('ia-badge');
    const last = document.getElementById('last-check');
    try {
      const res = await fetch('https://mmm-xs9j.vercel.app/api/status?force=' + Date.now(), { cache: 'no-store' });
      const data = await res.json();
      if (data && data.ok) {
        badge.textContent = 'En ligne ‚úÖ';
        badge.style.color = '#00ff88';
      } else {
        badge.textContent = 'Hors ligne ‚ùå';
        badge.style.color = '#ff5555';
      }
      last.textContent = 'Dernier check : ' + new Date().toLocaleTimeString('fr-FR');
    } catch (err) {
      badge.textContent = 'Hors ligne ‚ùå';
      badge.style.color = '#ff5555';
      last.textContent = 'Erreur : ' + err.message;
    }
  }

  // Lancer imm√©diatement et r√©p√©ter toutes les 10 secondes
  checkIA();
  setInterval(checkIA, 10000);
  </script>
</body>
</html>
